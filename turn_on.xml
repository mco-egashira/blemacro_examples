<macro name="turn_on" icon="LED_ON">
   <assert-service description="Ensure 0f044177-a99b-4f0c-9d04-c5f1d00f43d3 service" uuid="0f044177-a99b-4f0c-9d04-c5f1d00f43d3">
      <assert-characteristic description="Ensure 6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64 characteristic" uuid="6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64">
         <assert-cccd description="Ensure CCCD"/>
         <property name="READ" requirement="MANDATORY"/>
         <property name="WRITE" requirement="MANDATORY"/>
         <property name="NOTIFY" requirement="MANDATORY"/>
      </assert-characteristic>
   </assert-service>
   <write-descriptor description="Enable notifications for 6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" characteristic-uuid="6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" service-uuid="0f044177-a99b-4f0c-9d04-c5f1d00f43d3" uuid="00002902-0000-1000-8000-00805f9b34fb" value="0100"/>
   <write description="Write 0x01 to 6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" characteristic-uuid="6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" service-uuid="0f044177-a99b-4f0c-9d04-c5f1d00f43d3" value="01" type="WRITE_REQUEST"/>

   <sleep description="Wait for 5 seconds" duration="5000"/>
   <read description="Read value from 6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" characteristic-uuid="6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" service-uuid="0f044177-a99b-4f0c-9d04-c5f1d00f43d3">
      <assert-value description="Assert value equals 0x11" value="11">
   </read>
   
   <!-- <sleep-if service-uuid="0f044177-a99b-4f0c-9d04-c5f1d00f43d3" characteristic-uuid="6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" value="17" timeout="5000"/> -->

   <!-- 500ms間通知を待ち、その間に0x11を受信したら電源ON完了のアイコンを表示、0x12を受信したら電源ON失敗のアイコンを表示する
   <wait-for-wrire description="Wait for notification to 6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64" service-uuid="0f044177-a99b-4f0c-9d04-c5f1d00f43d3" characteristic-uuid="6dd812e5-b6fb-4fd0-8abb-d0ccdc6ace64">
      <assert-value description="Assert value equals 0x11" value="17"/>
   </wait-for-write> -->
</macro>
